{% include 'designer_header.html' %}

<div style="margin-bottom: 1em; background: url('/static/assets/img/inter.jpg'); height: 300px; width: 100%; background-size: cover;">
</div>

<center>
	<h3>Booking Details Of Design And Plan</h3>

	<!-- Search Inputs in one row -->
	<div class="search-container" style="display: flex; justify-content: space-between; width: 80%; margin-bottom: 1em;">
		<input type="text" id="categorySearch" onkeyup="filterTable()" placeholder="Search by Category" class="form-control" style="width: 30%;">
		<input type="text" id="designNameSearch" onkeyup="filterTable()" placeholder="Search by Design Name" class="form-control" style="width: 30%;">
		<input type="text" id="customerNameSearch" onkeyup="filterTable()" placeholder="Search by Customer Name" class="form-control" style="width: 30%;">
	</div>

	<!-- Table showing existing designs -->
	<table class="table table-bordered" id="designTable">
		<tr>
			<th>Index</th>
			<th>Customer Name</th>
			<th>Design Name</th>
			<th>Category Name</th>
			<th>Sub Category</th>
			<th>Color</th>
			<th>Square Feet</th>
			<th>Design Details</th>
			<th>Design Image</th>
		</tr>
		{% for i in data['view'] %}
		<tr>
			<td>{{loop.index}}</td>
			<td>{{i['fname']}} {{i['lname']}}</td>
			<td>{{i['designname']}}</td>
			<td>{{i['category_name']}}</td>
			<td>{{i['subcategory_name']}}</td>
			<td>{{i['color_name']}}</td>
			<td>{{i['square_feets']}}</td>
			<td>{{i['details']}}</td>
			<td><a href="/{{i['design_image']}}"><img src="/{{i['design_image']}}" width="100" height="100" alt="Designer Image"></a></td>
		</tr>
		{% endfor %}
	</table>
</center>

<script>
// Function to filter the table based on the search inputs
function filterTable() {
  var categoryInput = document.getElementById("categorySearch").value.toLowerCase();
  var designNameInput = document.getElementById("designNameSearch").value.toLowerCase();
  var customerNameInput = document.getElementById("customerNameSearch").value.toLowerCase();
  var table = document.getElementById("designTable");
  var rows = table.getElementsByTagName("tr");

  // Loop through the rows and hide those that don't match the search criteria
  for (var i = 1; i < rows.length; i++) {
    var cells = rows[i].getElementsByTagName("td");

    var categoryName = cells[3].textContent.toLowerCase();
    var designName = cells[2].textContent.toLowerCase();
    var customerName = cells[1].textContent.toLowerCase();

    if (categoryName.indexOf(categoryInput) > -1 &&
        designName.indexOf(designNameInput) > -1 &&
        customerName.indexOf(customerNameInput) > -1) {
      rows[i].style.display = "";
    } else {
      rows[i].style.display = "none";
    }
  }
}
</script>

{% include 'footer.html' %}
